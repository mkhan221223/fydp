<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: SNPs, PTMs & Machine Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A thematic, non-linear, single-page dashboard. The structure uses a top navigation bar for smooth scrolling to key sections: Core Concepts, The SNP-PTM Link, ML Pipeline, Toolkit Explorer, and Project Roadmap. This design was chosen to break down a dense academic report into digestible, interactive modules. It empowers users (CS students new to biology) to explore topics based on interest rather than a rigid, linear path, fostering discovery and reducing cognitive load. For instance, a user can first grasp the 'Core Concepts' visually, then jump to the 'Toolkit Explorer' to see relevant software, making the learning process more practical and self-directed. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Basic definitions of PTMs, SNPs. Goal: Inform. Viz/Method: Interactive cards and a donut chart. Interaction: Clicking a PTM card reveals details; chart shows SNP distribution. Justification: Simplifies complex definitions into visual, bite-sized pieces. Library: HTML/CSS for cards, Chart.js for the donut chart.
        - Report Info: MTUS1 gene case study. Goal: Compare/Explain. Viz/Method: Interactive diagram and a bar chart. Interaction: A button triggers a "mutation" in the diagram, updating text and showing a stability chart. Justification: Visually demonstrates the cause-and-effect of an SNP on protein stability. Library: HTML/CSS/JS for diagram, Chart.js for bar chart.
        - Report Info: The entire ML project workflow. Goal: Organize. Viz/Method: A horizontal, clickable flowchart. Interaction: Clicking a stage (e.g., 'Feature Extraction') expands to show details and tools. Justification: Transforms a long textual description into a clear, step-by-step interactive process. Library: HTML/CSS/JS.
        - Report Info: Lists of datasets, tools, libraries. Goal: Organize/Filter. Viz/Method: A filterable grid of cards. Interaction: Buttons filter the grid by category (e.g., 'Dataset', 'Library'). Justification: Makes a long, unmanageable list easily searchable and browsable. Library: HTML/CSS/JS.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7; /* Warm Neutral Background */
            color: #334155; /* Slate 800 for text */
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #2563eb; /* Blue 600 */
            border-bottom-color: #2563eb;
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 320px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 400px;
            }
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .pipeline-step.active {
            border-color: #2563eb;
            background-color: #eff6ff;
        }
        .toolkit-item {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-slate-800">Bioinformatics ML Guide</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#intro" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">Home</a>
                        <a href="#concepts" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">Core Concepts</a>
                        <a href="#link" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">The Link</a>
                        <a href="#pipeline" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">ML Pipeline</a>
                        <a href="#toolkit" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">Toolkit</a>
                        <a href="#roadmap" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">Roadmap</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-500 hover:text-slate-700 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#intro" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">Home</a>
                <a href="#concepts" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">Core Concepts</a>
                <a href="#link" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">The Link</a>
                <a href="#pipeline" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">ML Pipeline</a>
                <a href="#toolkit" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">Toolkit</a>
                <a href="#roadmap" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600">Roadmap</a>
            </div>
        </div>
    </header>

    <main>
        <section id="intro" class="py-20 md:py-28">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight">From Genetic Code to Machine Learning</h2>
                <p class="mt-4 max-w-3xl mx-auto text-lg md:text-xl text-slate-600">An interactive guide for Computer Science students tackling a bioinformatics FYDP. This application breaks down the complex relationship between genetic variations (SNPs), protein modifications (PTMs), and their role in disease, providing a clear roadmap for building a predictive ML model.</p>
                <div class="mt-8">
                    <a href="#concepts" class="inline-block bg-blue-600 text-white font-semibold px-8 py-3 rounded-lg shadow-lg hover:bg-blue-700 transition-colors">Start Exploring</a>
                </div>
            </div>
        </section>

        <section id="concepts" class="py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-slate-900">The Core Concepts</h3>
                    <p class="mt-3 max-w-2xl mx-auto text-lg text-slate-600">To build an effective model, you first need to understand the key players. Here are the biological fundamentals, simplified for developers.</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 items-start">
                    <div class="card bg-amber-50 p-6 rounded-xl">
                        <h4 class="text-2xl font-bold text-slate-800 mb-3">🧬 DNA's "Typos": SNPs</h4>
                        <p class="text-slate-700 mb-4">A Single-Nucleotide Polymorphism (SNP) is a change in a single DNA letter (A, T, C, or G). Think of it as a typo in the genetic code. While most are harmless, some can alter a gene's instructions, affecting protein function and potentially leading to disease.</p>
                        <div class="chart-container">
                            <canvas id="snpDistributionChart"></canvas>
                        </div>
                         <p class="text-center text-sm text-slate-500 mt-2">Typical distribution of SNPs in the human genome.</p>
                         <button id="explain-snp" class="mt-4 w-full bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors">✨ Explain More about SNPs</button>
                    </div>

                    <div class="card bg-blue-50 p-6 rounded-xl">
                        <h4 class="text-2xl font-bold text-slate-800 mb-3">⚙️ Proteins: The Cell's Machines</h4>
                        <p class="text-slate-700 mb-4">Proteins are the workhorses of the cell, built from instructions in DNA. Their 3D shape is critical to their function. An SNP can change an amino acid, potentially altering this shape and breaking the "machine."</p>
                        <div class="bg-white p-4 rounded-lg text-center">
                            <p class="text-5xl">� → 📜 → ⚙️</p>
                            <p class="text-sm font-medium mt-2">DNA (Blueprint) → RNA (Copy) → Protein (Machine)</p>
                        </div>
                    </div>

                    <div class="card bg-green-50 p-6 rounded-xl">
                        <h4 class="text-2xl font-bold text-slate-800 mb-3">🔧 PTMs: Protein "Upgrades"</h4>
                        <p class="text-slate-700 mb-4">Post-Translational Modifications (PTMs) are chemical "upgrades" added to proteins after they're built. They act like on/off switches, directing proteins or changing their function. Click a PTM below to learn more.</p>
                        <div id="ptm-cards" class="grid grid-cols-2 gap-2 text-center">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="link" class="py-20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-slate-900">The Critical Link: How SNPs Disrupt PTMs</h3>
                    <p class="mt-3 max-w-3xl mx-auto text-lg text-slate-600">A detrimental SNP often works by breaking a PTM site. This is a primary way genetic typos cause disease. Let's visualize this with a real-world case study on the *MTUS1* gene, linked to cancer.</p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="text-2xl font-bold mb-4">Case Study: The *MTUS1* Gene</h4>
                            <div id="protein-diagram" class="relative bg-slate-100 p-6 rounded-lg h-48 flex items-center justify-center transition-all duration-500">
                                <div class="text-center">
                                    <span class="text-lg font-mono font-bold text-green-600">NORMAL PROTEIN</span>
                                    <p class="text-sm text-slate-600 mt-2">Functional PTM site allows proper regulation.</p>
                                </div>
                                <div id="ptm-site" class="absolute top-1/2 -mt-4 -right-4 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full transition-all duration-500">PTM</div>
                            </div>
                            <p id="explanation-text" class="mt-4 text-slate-600">In its healthy state, the MTUS1 protein has a critical PTM site that helps regulate its function. This is essential for preventing uncontrolled cell growth.</p>
                            <button id="mutate-button" class="mt-6 bg-red-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-red-600 transition-colors">Introduce a Harmful SNP</button>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold mb-4 text-center">Predicted Impact on Protein Stability</h4>
                            <div class="chart-container h-64 md:h-80">
                                <canvas id="stabilityChart"></canvas>
                            </div>
                            <p class="text-center text-sm text-slate-500 mt-2">Analysis shows most harmful nsSNPs in *MTUS1* decrease protein stability.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="pipeline" class="py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-slate-900">Your Machine Learning Project Pipeline</h3>
                    <p class="mt-3 max-w-2xl mx-auto text-lg text-slate-600">Here’s an end-to-end roadmap for your project. Click each step to see the key tasks, tools, and techniques involved.</p>
                </div>
                <div class="flex flex-col md:flex-row justify-center items-start md:space-x-4 space-y-4 md:space-y-0">
                </div>
                <div id="pipeline-details" class="mt-8 bg-slate-50 p-6 rounded-lg min-h-[200px] transition-all duration-300">
                    <p class="text-slate-500 text-center">Click a step above to see details.</p>
                </div>
            </div>
        </section>

        <section id="toolkit" class="py-20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-slate-900">The Toolkit Explorer</h3>
                    <p class="mt-3 max-w-2xl mx-auto text-lg text-slate-600">Navigating the landscape of bioinformatics tools can be daunting. Use the filters below to explore the essential datasets, libraries, and applications for your project.</p>
                </div>
                <div class="flex justify-center flex-wrap gap-2 mb-8">
                </div>
                <div id="toolkit-grid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                </div>
            </div>
        </section>

        <section id="roadmap" class="py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                 <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-slate-900">FYDP Project Roadmap</h3>
                    <p class="mt-3 max-w-2xl mx-auto text-lg text-slate-600">Tips and strategies for successfully managing your six-person team on this interdisciplinary project.</p>
                </div>
                <div class="grid md:grid-cols-2 gap-8">
                     <div class="bg-slate-50 p-6 rounded-xl">
                        <h4 class="text-2xl font-bold text-slate-800 mb-4">Project Management: Go Agile!</h4>
                        <p class="text-slate-600 mb-4">For a research-heavy project with unknowns, a rigid plan won't work. Adopt an Agile/Scrum approach.</p>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✓</span>
                                <div><strong class="text-slate-700">Sprints:</strong> Break work into 1-2 week "sprints" with clear goals.</div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✓</span>
                                <div><strong class="text-slate-700">Daily Stand-ups:</strong> Quick 15-min daily meetings to sync progress and blockers.</div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✓</span>
                                <div><strong class="text-slate-700">Flexibility:</strong> Be ready to adapt your plan as you learn more about the data and biology.</div>
                            </li>
                        </ul>
                    </div>
                     <div class="bg-slate-50 p-6 rounded-xl">
                        <h4 class="text-2xl font-bold text-slate-800 mb-4">Collaboration is Key</h4>
                        <p class="text-slate-600 mb-4">Use professional tools to keep everyone on the same page.</p>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <span class="text-blue-500 mr-3 mt-1"><strong>Git</strong></span>
                                <div><strong class="text-slate-700">GitHub:</strong> Your single source of truth for all code, documentation, and progress tracking. No excuses!</div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-blue-500 mr-3 mt-1"><strong>💬</strong></span>
                                <div><strong class="text-slate-700">Slack/Teams:</strong> For quick questions and daily communication.</div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-blue-500 mr-3 mt-1"><strong>✓</strong></span>
                                <div><strong class="text-slate-700">Trello/Asana:</strong> To visualize tasks, assign owners, and track deadlines for each sprint.</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <p>An Interactive Learning Application for Bioinformatics.</p>
            <p class="text-sm text-slate-400 mt-2">Designed to translate complex research into an accessible, explorable format.</p>
        </div>
    </footer>

    <div id="ptm-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 modal-content scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-2xl font-bold"></h3>
                <button id="close-modal" class="text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <div id="modal-content"></div>
             <div id="modal-loading" class="hidden text-center mt-4">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
                <p class="text-slate-500 mt-2">Generating explanation...</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ptmData = [
                { name: 'Phosphorylation', desc: 'Adds a phosphate group. Acts like an on/off switch for protein activity. Crucial for cell signaling.', role: 'Signal transduction, cell cycle regulation.', prompt: 'Explain phosphorylation in a beginner-friendly way, focusing on its role in biology and why it matters for protein function.' },
                { name: 'Acetylation', desc: 'Adds an acetyl group. Often regulates gene expression by modifying histone proteins.', role: 'Gene transcription, metabolism.', prompt: 'Explain acetylation in a beginner-friendly way, focusing on its role in biology and why it matters for protein function.' },
                { name: 'Ubiquitination', desc: 'Adds a small protein (ubiquitin). Often tags a protein for destruction, but also has signaling roles.', role: 'Protein degradation, DNA repair.', prompt: 'Explain ubiquitination in a beginner-friendly way, focusing on its role in biology and why it matters for protein function.' },
                { name: 'Glycosylation', desc: 'Adds sugar molecules. Important for protein folding, stability, and cell-to-cell recognition.', role: 'Cell adhesion, immune recognition.', prompt: 'Explain glycosylation in a beginner-friendly way, focusing on its role in biology and why it matters for protein function.' }
            ];

            const pipelineData = [
                { 
                    id: 'step1',
                    name: '1. Data Collection & Preprocessing', 
                    content: `
                        <h4 class="text-xl font-bold mb-2">Goal: Gather and clean the raw material.</h4>
                        <p class="mb-4">This is the foundation. You need high-quality, well-structured data from multiple sources.</p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-600">
                            <li><strong>Acquire Data:</strong> Download SNP data from <strong>dbSNP</strong>, protein/PTM info from <strong>UniProt</strong>, and crucial harmful/harmless labels from <strong>ClinVar</strong>.</li>
                            <li><strong>Clean Data:</strong> Handle missing values, normalize numerical features, and merge datasets.</li>
                            <li><strong>Encode Data:</strong> Convert biological sequences (A, T, C, G) into numbers (e.g., one-hot encoding) that a model can understand.</li>
                        </ul>
                    `
                },
                { 
                    id: 'step2',
                    name: '2. Feature Extraction', 
                    content: `
                        <h4 class="text-xl font-bold mb-2">Goal: Turn sequences into meaningful features.</h4>
                        <p class="mb-4">Your model doesn't understand raw DNA. You must translate it into informative numerical features.</p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-600">
                            <li><strong>Sequence-based:</strong> Calculate <strong>k-mer frequencies</strong> (e.g., frequency of 'ATG'), GC content, and amino acid composition.</li>
                            <li><strong>Physicochemical:</strong> Extract properties like protein hydropathicity, flexibility, or DNA melting temperature using libraries like <strong>PyBioMed</strong>.</li>
                            <li><strong>Advanced Embeddings:</strong> Use pre-trained models like <strong>ESM2</strong> (for proteins) or <strong>DNABERT</strong> (for DNA) to generate rich vector representations of sequences.</li>
                        </ul>
                        <button id="suggest-features-btn" class="mt-4 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">✨ Suggest More Features</button>
                        <div id="feature-suggestions-area" class="mt-4 p-4 bg-white rounded-lg hidden">
                            <p class="font-semibold mb-2">What type of sequence are you working with?</p>
                            <div class="flex gap-4 mb-3">
                                <label class="flex items-center">
                                    <input type="radio" name="sequenceType" value="DNA" class="mr-2"> DNA
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="sequenceType" value="Protein" class="mr-2"> Protein
                                </label>
                            </div>
                            <button id="get-suggestions-btn" class="bg-green-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">Get Suggestions</button>
                            <div id="feature-suggestions-output" class="mt-3 text-slate-700"></div>
                            <div id="feature-suggestions-loading" class="hidden text-center mt-4">
                                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
                                <p class="text-slate-500 mt-2">Generating suggestions...</p>
                            </div>
                        </div>
                    `
                },
                { 
                    id: 'step3',
                    name: '3. Model Training & Evaluation', 
                    content: `
                        <h4 class="text-xl font-bold mb-2">Goal: Build and test your predictive engine.</h4>
                        <p class="mb-4">Choose the right algorithm for the job, train it on your features, and rigorously test its performance.</p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-600">
                            <li><strong>Select Model:</strong> Start with robust baselines like <strong>Random Forest</strong> or <strong>XGBoost</strong> (using Scikit-learn). For more complex patterns, explore <strong>Deep Learning</strong> (CNNs, Transformers) with TensorFlow/PyTorch.</li>
                            <li><strong>Train:</strong> Feed your training data to the model. Use techniques like <strong>cross-validation</strong> to get a reliable measure of performance.</li>
                            <li><strong>Evaluate:</strong> Test the model on unseen data. Use metrics like <strong>Accuracy, Precision, Recall, and AUC</strong> to measure how well it distinguishes harmful from harmless SNPs.</li>
                        </ul>
                    `
                },
                 { 
                    id: 'step4',
                    name: '4. Interpretation & Results', 
                    content: `
                        <h4 class="text-xl font-bold mb-2">Goal: Understand what the model learned.</h4>
                        <p class="mb-4">A prediction is useless if you can't explain it. Interpret your model to find biological insights.</p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-600">
                            <li><strong>Feature Importance:</strong> For models like Random Forest, identify which features (e.g., a specific k-mer, protein stability) were most important for making predictions.</li>
                            <li><strong>Explainable AI (XAI):</strong> Use tools like <strong>SHAP</strong> to explain individual predictions from complex "black-box" models like neural networks.</li>
                            <li><strong>Biological Context:</strong> Connect your findings back to biology. Does a highly-ranked feature make biological sense? This is where collaboration with your supervisor is key.</li>
                        </ul>
                    `
                }
            ];

            const toolkitData = [
                { name: 'dbSNP', type: 'Dataset', desc: 'Primary public archive for all types of genetic variations.' },
                { name: 'UniProt', type: 'Dataset', desc: 'Comprehensive resource for protein sequence and functional info, including PTMs.' },
                { name: 'ClinVar', type: 'Dataset', desc: 'Crucial for ML: links genetic variants to human health with pathogenicity labels.' },
                { name: 'TCGA', type: 'Dataset', desc: 'Cancer-focused multi-omics data, good for disease-specific projects.' },
                { name: 'Biopython', type: 'Python Library', desc: 'The fundamental toolkit for computational molecular biology in Python.' },
                { name: 'PyBioMed', type: 'Python Library', desc: 'A rich library for extracting features (descriptors) from biological sequences.' },
                { name: 'Scikit-learn', type: 'ML Library', desc: 'The go-to for traditional ML models (Random Forest, SVM) and preprocessing.' },
                { name: 'TensorFlow/Keras', type: 'ML Library', desc: 'Leading frameworks for building and training deep learning models.' },
                { name: 'PyTorch', type: 'ML Library', desc: 'Another major deep learning framework, known for its flexibility in research.' },
                { name: 'SIFT', type: 'Prediction Tool', desc: 'Predicts whether an amino acid substitution affects protein function.' },
                { name: 'PolyPhen-2', type: 'Prediction Tool', desc: 'Predicts the functional impact of an amino acid substitution.' },
                { name: 'AstraPTM', type: 'Prediction Tool', desc: 'A modern, transformer-based deep learning tool for predicting PTM sites.' }
            ];

            const ptmCardsContainer = document.getElementById('ptm-cards');
            const ptmModal = document.getElementById('ptm-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalLoading = document.getElementById('modal-loading');
            const closeModalButton = document.getElementById('close-modal');
            const explainSnpButton = document.getElementById('explain-snp');

            // --- Gemini API Integration for Explanations ---
            const generateExplanation = async (conceptName, promptText) => {
                modalTitle.textContent = conceptName;
                modalContent.innerHTML = '';
                modalContent.classList.add('hidden');
                modalLoading.classList.remove('hidden');
                ptmModal.classList.remove('hidden');
                setTimeout(() => {
                    ptmModal.querySelector('.modal-backdrop').classList.add('opacity-100');
                    ptmModal.querySelector('.modal-content').classList.add('scale-100');
                }, 10);

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: promptText }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        modalContent.innerHTML = `<p class="text-slate-700">${text}</p>`;
                    } else {
                        modalContent.innerHTML = `<p class="text-red-500">Failed to generate explanation. Please try again.</p>`;
                    }
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    modalContent.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}. Please try again.</p>`;
                } finally {
                    modalLoading.classList.add('hidden');
                    modalContent.classList.remove('hidden');
                }
            };

            ptmData.forEach(ptm => {
                const card = document.createElement('div');
                card.className = 'card bg-white p-6 rounded-xl shadow-sm';
                card.innerHTML = `
                    <h4 class="text-xl font-bold text-slate-800 mb-3">🔧 ${ptm.name}</h4>
                    <p class="text-slate-700 mb-4">${ptm.desc}</p>
                    <button class="w-full bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors explain-ptm-btn" data-ptm-name="${ptm.name}" data-ptm-prompt="${ptm.prompt}">✨ Explain More</button>
                `;
                ptmCardsContainer.appendChild(card);
            });

            document.querySelectorAll('.explain-ptm-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const name = e.target.dataset.ptmName;
                    const prompt = e.target.dataset.ptmPrompt;
                    generateExplanation(name, prompt);
                });
            });

            explainSnpButton.addEventListener('click', () => {
                const snpPrompt = "Explain Single-Nucleotide Polymorphisms (SNPs) in a beginner-friendly way for computer science students, focusing on what they are, why they are important, and how they can affect genes and proteins.";
                generateExplanation("Single-Nucleotide Polymorphisms (SNPs)", snpPrompt);
            });

            closeModalButton.onclick = () => {
                ptmModal.querySelector('.modal-backdrop').classList.remove('opacity-100');
                ptmModal.querySelector('.modal-content').classList.remove('scale-100');
                setTimeout(() => ptmModal.classList.add('hidden'), 300);
            };
            ptmModal.onclick = (e) => {
                if(e.target === ptmModal) {
                    closeModalButton.click();
                }
            };

            const snpCtx = document.getElementById('snpDistributionChart').getContext('2d');
            new Chart(snpCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Between Genes (Non-coding)', 'Within Genes (Coding)', 'Regulatory Regions'],
                    datasets: [{
                        label: 'SNP Distribution',
                        data: [85, 10, 5],
                        backgroundColor: ['#64748b', '#3b82f6', '#10b981'],
                        borderColor: '#FDFBF7',
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                             labels: {
                                font: { size: 12 }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });

            const stabilityCtx = document.getElementById('stabilityChart').getContext('2d');
            const stabilityChart = new Chart(stabilityCtx, {
                type: 'bar',
                data: {
                    labels: ['C264Y', 'S1259L', 'E960K', 'L1084V', 'P503T', 'L1143Q'],
                    datasets: [{
                        label: 'Predicted Stability Change',
                        data: [-1.2, -0.8, -1.5, -0.5, -1.8, -1.1],
                        backgroundColor: '#ef4444',
                        borderColor: '#dc2626',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            title: { display: true, text: 'Stability Score (ΔΔG)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.raw > 0 ? 'Increase' : 'Decrease'} in stability`;
                                }
                            }
                        }
                    }
                }
            });

            const mutateButton = document.getElementById('mutate-button');
            const proteinDiagram = document.getElementById('protein-diagram');
            const ptmSite = document.getElementById('ptm-site');
            const explanationText = document.getElementById('explanation-text');
            let isMutated = false;

            mutateButton.addEventListener('click', () => {
                isMutated = !isMutated;
                if (isMutated) {
                    proteinDiagram.querySelector('span').textContent = 'MUTATED PROTEIN';
                    proteinDiagram.querySelector('span').classList.remove('text-green-600');
                    proteinDiagram.querySelector('span').classList.add('text-red-600');
                    proteinDiagram.querySelector('p').textContent = 'SNP disrupts PTM site, causing loss of function.';
                    ptmSite.classList.remove('bg-green-500');
                    ptmSite.classList.add('bg-red-500', 'opacity-25');
                    ptmSite.textContent = 'BROKEN';
                    explanationText.textContent = 'A single nsSNP changes an amino acid at the PTM site. The modification can no longer attach properly, leading to a loss of protein function and increasing cancer risk.';
                    mutateButton.textContent = 'Revert to Normal';
                    mutateButton.classList.remove('bg-red-500', 'hover:bg-red-600');
                    mutateButton.classList.add('bg-green-500', 'hover:bg-green-600');
                } else {
                    proteinDiagram.querySelector('span').textContent = 'NORMAL PROTEIN';
                    proteinDiagram.querySelector('span').classList.add('text-green-600');
                    proteinDiagram.querySelector('span').classList.remove('text-red-600');
                    proteinDiagram.querySelector('p').textContent = 'Functional PTM site allows proper regulation.';
                    ptmSite.classList.add('bg-green-500');
                    ptmSite.classList.remove('bg-red-500', 'opacity-25');
                    ptmSite.textContent = 'PTM';
                    explanationText.textContent = 'In its healthy state, the MTUS1 protein has a critical PTM site that helps regulate its function. This is essential for preventing uncontrolled cell growth.';
                    mutateButton.textContent = 'Introduce a Harmful SNP';
                    mutateButton.classList.add('bg-red-500', 'hover:bg-red-600');
                    mutateButton.classList.remove('bg-green-500', 'hover:bg-green-600');
                }
            });
            
            const pipelineContainer = document.querySelector('#pipeline .flex');
            const pipelineDetails = document.getElementById('pipeline-details');
            
            // --- Gemini API Integration for Feature Suggestions ---
            const suggestFeatures = async (sequenceType) => {
                const outputArea = document.getElementById('feature-suggestions-output');
                const loadingArea = document.getElementById('feature-suggestions-loading');
                outputArea.innerHTML = '';
                loadingArea.classList.remove('hidden');

                const promptText = `Suggest relevant feature engineering techniques and features to extract from ${sequenceType} sequences for a machine learning model predicting biological effects. Provide a list format, with brief explanations. Focus on methods suitable for bioinformatics tasks like SNP/PTM prediction.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: promptText }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        outputArea.innerHTML = `<p class="text-slate-700">${text}</p>`;
                    } else {
                        outputArea.innerHTML = `<p class="text-red-500">Failed to generate suggestions. Please try again.</p>`;
                    }
                } catch (error) {
                    console.error("Error calling Gemini API for feature suggestions:", error);
                    outputArea.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}. Please try again.</p>`;
                } finally {
                    loadingArea.classList.add('hidden');
                }
            };

            pipelineData.forEach((step, index) => {
                const stepEl = document.createElement('button');
                stepEl.className = 'pipeline-step border-2 border-slate-300 rounded-lg p-4 text-center w-full md:w-1/4 cursor-pointer hover:bg-slate-100 transition-colors';
                stepEl.innerHTML = `<div class="font-bold text-slate-800">${step.name}</div>`;
                stepEl.dataset.content = step.content;
                stepEl.dataset.id = step.id;
                
                if (index < pipelineData.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'hidden md:flex items-center justify-center text-slate-400 text-2xl font-light mx-4';
                    arrow.innerHTML = '→';
                    pipelineContainer.appendChild(stepEl);
                    pipelineContainer.appendChild(arrow);
                } else {
                    pipelineContainer.appendChild(stepEl);
                }

                stepEl.addEventListener('click', () => {
                    document.querySelectorAll('.pipeline-step').forEach(el => el.classList.remove('active'));
                    stepEl.classList.add('active');
                    pipelineDetails.innerHTML = step.content;

                    // Attach event listeners for feature suggestion after content is loaded
                    if (step.id === 'step2') {
                        const suggestFeaturesBtn = document.getElementById('suggest-features-btn');
                        const featureSuggestionsArea = document.getElementById('feature-suggestions-area');
                        const getSuggestionsBtn = document.getElementById('get-suggestions-btn');
                        
                        suggestFeaturesBtn.addEventListener('click', () => {
                            featureSuggestionsArea.classList.toggle('hidden');
                            document.getElementById('feature-suggestions-output').innerHTML = ''; // Clear previous output
                        });

                        getSuggestionsBtn.addEventListener('click', () => {
                            const selectedRadio = document.querySelector('input[name="sequenceType"]:checked');
                            if (selectedRadio) {
                                suggestFeatures(selectedRadio.value);
                            } else {
                                document.getElementById('feature-suggestions-output').innerHTML = '<p class="text-red-500">Please select a sequence type.</p>';
                            }
                        });
                    }
                });
            });

            const toolkitFilterContainer = document.querySelector('#toolkit .flex');
            const toolkitGrid = document.getElementById('toolkit-grid');
            const filters = ['All', ...new Set(toolkitData.map(item => item.type))];
            
            filters.forEach(filter => {
                const button = document.createElement('button');
                button.className = 'filter-btn px-4 py-2 rounded-full text-sm font-semibold transition-colors';
                button.textContent = filter;
                button.dataset.filter = filter;
                if (filter === 'All') {
                    button.classList.add('bg-blue-600', 'text-white');
                } else {
                     button.classList.add('bg-white', 'text-slate-700', 'hover:bg-slate-100');
                }
                button.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('bg-blue-600', 'text-white');
                        btn.classList.add('bg-white', 'text-slate-700', 'hover:bg-slate-100');
                    });
                    button.classList.add('bg-blue-600', 'text-white');
                    button.classList.remove('bg-white', 'text-slate-700', 'hover:bg-slate-100');
                    filterToolkit(filter);
                });
                toolkitFilterContainer.appendChild(button);
            });

            const renderToolkitItems = (items) => {
                toolkitGrid.innerHTML = '';
                items.forEach(item => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'toolkit-item card bg-white p-4 rounded-lg shadow-md';
                    itemEl.dataset.type = item.type;
                    itemEl.innerHTML = `
                        <div class="flex justify-between items-start">
                            <h5 class="font-bold text-slate-800">${item.name}</h5>
                            <span class="text-xs font-semibold ${
                                item.type === 'Dataset' ? 'bg-amber-100 text-amber-800' :
                                item.type === 'Python Library' ? 'bg-blue-100 text-blue-800' :
                                item.type === 'ML Library' ? 'bg-purple-100 text-purple-800' :
                                'bg-green-100 text-green-800'
                            } px-2 py-1 rounded-full">${item.type}</span>
                        </div>
                        <p class="text-sm text-slate-600 mt-2">${item.desc}</p>
                    `;
                    toolkitGrid.appendChild(itemEl);
                });
            };

            const filterToolkit = (filter) => {
                const items = filter === 'All' ? toolkitData : toolkitData.filter(item => item.type === filter);
                renderToolkitItems(items);
            };

            renderToolkitItems(toolkitData);
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });
            });

        });
    </script>
</body>
</html>
�
